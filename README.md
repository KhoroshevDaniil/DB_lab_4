# Big Data lab 4
* Задача о философах [тут](src/main/scala/spaghetti/Philosopher.scala)
* Двухфакторный коммит [тут](src/main/scala/two_phase_commit)
  * [Coordinator](src/main/scala/two_phase_commit/transaction_coordinator/Coordinator.scala)
  * [Participant](src/main/scala/two_phase_commit/participant/Participant.scala)

## Description
### Задача о философах:
1. Сначала мы ждём, пока все философы сядут за стол
2. Затем происходит проверка доступности соседних от философа вилок
3. Если вилки недоступны (то есть, эфимерные узлы вылок уже созданы кем-то), то философ ожидает, пока соответствующие узлы вилок удалятся
4. Если вилки доступны, (то есть, эфимерных узлов вилок нет), то процесс философа создаёт эфимерные узлы этих вилок ```fork_<id>``` и кушает
5. После того как философ покушал, он удаляет узлы вилок и начинает думать какое-то время
6. После того как философ подумал, он ожидает, пока вилки снова будут доступны

### Двух фазный коммит:
1. Сначала создаётся процесс ```Coordinator```, он ожидает, пока все ```Participant``` будут созданы
2. Создаются ```Participant```, они ожидают, пока все остальные участники тоже будут созданы.
3. После создания процессов ```Participant``` создаётся его эфимерный узел ```participant_<id>```
4. После создания каждого ```Participant``` они рандомно принимают решение (```commit``` или ```rollback```), записывая решение в свой узел ```participant_<id>```
5. ```Coordinator``` собирает все статусы от ```Participant``` и принимает итоговое решение, (```result:commit``` или ```result:rollback```)
6. Данное сообщение помещается в узлы ```participant_<id>```, которое читает каждый ```Participant```, после чего все завершают работу
